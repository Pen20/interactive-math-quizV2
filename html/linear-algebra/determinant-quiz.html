<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matrix Determinant Quiz - Interactive Math Quiz</title>
    <link rel="stylesheet" href="../../css/quiz-common.css" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </head>
  <body>
    <div class="quiz-container">
      <a href="/html/linear-algebra/" class="back-button"
        >← Back to Linear Algebra</a
      >

      <h1 class="quiz-title">Matrix Determinant Quiz</h1>

      <div class="question-text">
        <div class="question-display">
          <h4>Current Matrix:</h4>
          <div id="matrix-display">
            \[ \begin{bmatrix} 2 & 4 & 3 \\ -3 & 0 & -5 \\ k & 4 & 3
            \end{bmatrix} \]
          </div>
          <p id="question-text">
            Find the values of \(k\) for which the determinant of the matrix
            above is non-zero.
          </p>
        </div>

        <button class="button secondary" id="new-question">
          Generate New Question
        </button>

        <div class="custom-input">
          <label for="user-answer">Your Answer:</label>
          <input
            type="text"
            id="user-answer"
            placeholder="e.g., k < 2 or k > 2"
          />
          <div class="validation" id="validation-answer"></div>
        </div>

        <div class="help-section">
          <button class="button secondary" id="show-hints">
            Need Help? Show Hints
          </button>
        </div>

        <div class="reasoning-section">
          <h3>Explain Your Reasoning</h3>
          <p>
            Please describe the steps you took to solve this problem. You can
            use mathematical notation:
          </p>

          <div class="math-help">
            <h5>Mathematical Notation Help:</h5>
            <div class="math-examples">
              <div class="math-example">
                <strong>Determinant:</strong> $\det(A)$ or $|A|$
              </div>
              <div class="math-example">
                <strong>Matrix:</strong> $\begin{bmatrix} a & b & c \\ d & e & f
                \\ g & h & i \end{bmatrix}$
              </div>
              <div class="math-example">
                <strong>Inequality:</strong> $k \neq 2$
              </div>
              <div class="math-example">
                <strong>Formula:</strong> $a(ei − fh) − b(di − fg) + c(dh − eg)$
              </div>
              <div class="math-example">
                <strong>Set notation:</strong> $k \in \mathbb{R} \setminus
                \{2\}$
              </div>
              <div class="math-example">
                <strong>Interval notation:</strong> $(-\infty, 2) \cup
                (2,\infty)$
              </div>
            </div>
            <p style="margin-top: 10px; font-size: 14px">
              <strong>Usage:</strong> Use $...$ for inline math and $$...$$ for
              display math.
            </p>
          </div>

          <textarea
            class="reasoning-input"
            id="reasoning-input"
            placeholder="Enter your step-by-step reasoning here. Use $...$ or $$...$$."
            rows="4"
          ></textarea>

          <div class="latex-validation hidden" id="latex-validation"></div>

          <div class="math-preview">
            <div class="math-preview-label">Live Preview:</div>
            <div id="math-preview-content">
              Your mathematical notation will appear here as you type...
            </div>
          </div>

          <div class="reasoning-feedback" id="reasoning-feedback"></div>
        </div>

        <div class="input-status">
          <div class="status-item">
            <span id="answer-status-icon" class="status-cross">✗</span
            ><span>Answer provided</span>
          </div>
          <div class="status-item">
            <span id="reasoning-status-icon" class="status-cross">✗</span
            ><span>Reasoning provided</span>
          </div>
          <div class="status-item">
            <span id="latex-status-icon" class="status-cross">✗</span
            ><span>Valid LaTeX syntax</span>
          </div>
        </div>

        <div class="action-buttons">
          <button class="button primary" id="check-answer" disabled>
            Check Solution
          </button>
          <button class="button secondary" id="show-solution">
            Show Solution
          </button>
          <button class="button secondary" id="show-steps">Show Steps</button>
          <button class="button success" id="clear-all">Clear All</button>
        </div>

        <div class="ai-feedback-enhanced hidden" id="ai-feedback-enhanced">
          <h4>AI Feedback</h4>
          <div
            class="ai-feedback-content-enhanced"
            id="ai-feedback-content-enhanced"
          ></div>
        </div>

        <div class="custom-hint hidden" id="hint">
          <h4>Helpful Hints</h4>
          <p>
            <strong>Hint 1:</strong> Calculate the determinant using the formula
            for a 3×3 matrix.
          </p>
          <p>
            <strong>Hint 2:</strong> Set the determinant equal to zero and solve
            for k.
          </p>
          <p>
            <strong>Hint 3:</strong> The determinant is non-zero for all values
            except the solution from step 2.
          </p>
          <p>
            <strong>Hint 4:</strong> Express your answer using inequality
            notation like "k &lt; value or k &gt; value".
          </p>
          <p><strong>Determinant formula:</strong></p>
          <p>
            $$ \begin{vmatrix} a & b & c \\ d & e & f \\ g & h & i \end{vmatrix}
            = a(ei - fh) - b(di - fg) + c(dh - eg) $$
          </p>
        </div>

        <div class="custom-hint hidden" id="examples">
          <h4>Example Answers</h4>
          <p><strong>For k ≠ 2:</strong> <code>k &lt; 2 or k &gt; 2</code></p>
          <p>
            <strong>For k ≠ -1 and k ≠ 3:</strong>
            <code>k &lt; -1 or (-1 &lt; k and k &lt; 3) or k &gt; 3</code>
          </p>
          <p>
            <strong>For all k except 5:</strong>
            <code>k &lt; 5 or k &gt; 5</code>
          </p>
          <p><strong>Alternative notations:</strong></p>
          <p><code>k ≠ 2</code> or <code>k != 2</code></p>
          <p>
            <code>k ∈ ℝ \ {2}</code> or
            <code>(-\infty, 2) \cup (2, \infty)</code>
          </p>
        </div>
      </div>

      <div class="feedback hidden" id="feedback"></div>

      <div class="step-by-step hidden" id="step-by-step">
        <h3>Step-by-Step Solution</h3>
        <div id="steps-content"></div>
      </div>

      <div class="solution hidden" id="solution">
        <h3>Complete Solution</h3>
        <div id="solution-content"></div>
      </div>
    </div>

    <!-- Order matters: app (model selection only) -> openai service -> shared renderer -> this quiz -->
    <script src="../../js/app.js"></script>
    <script src="../../js/openai-service.js"></script>
    <script src="../../js/ai-render.js"></script>
    <script src="../../js/determinant-quiz.js"></script>
  </body>
</html>
